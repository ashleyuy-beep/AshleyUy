<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personal | Ashley Uy</title>
  <style>
/* Loading Screen */
.loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10002;
  transition: opacity 0.5s ease;
}

.loading-text {
  font-size: 1rem;
  font-weight: 100;
  animation: blink 1.5s infinite;
}

@keyframes blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

/* Global Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  width: 100%;
  height: 100%;
  font-family: "Helvetica Neue", sans-serif;
  font-weight: 100;
  background-color: #fff;
  padding-top: 60px;
  scroll-behavior: smooth;
}

/* Header Navigation */
.header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 60px;
  background-color: rgba(255, 255, 255, 0.95);
  z-index: 10000;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1em 2em;
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  transition: all 0.3s ease;
  will-change: transform;
}

.site-logo {
  font-size: 20px;
  font-weight: 100;
  line-height: 1;
  transition: transform 0.3s ease;
}

.site-logo:hover {
  transform: translateY(-2px);
}

.nav-icons {
  display: flex;
  gap: 1.5em;
  align-items: center;
}

.nav-icon {
  cursor: pointer;
  width: 24px;
  height: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.nav-icon:hover {
  transform: scale(1.1);
}

.grid-icon {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-gap: 2px;
  width: 18px;
  height: 18px;
}

.grid-dot {
  width: 4px;
  height: 4px;
  background-color: black;
  border-radius: 50%;
}

.singular-icon {
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: 18px;
}

.line {
  width: 18px;
  height: 2px;
  background-color: black;
  transition: width 0.3s ease;
}

.nav-icon:hover .line {
  width: 15px;
}

.overlay-icon {
  width: 18px;
  height: 18px;
  background-color: black;
  border-radius: 50%;
  transition: transform 0.3s ease;
}

.nav-icon:hover .overlay-icon {
  transform: scale(0.9);
}

/* View toggle icons */
#view-toggle {
  position: relative;
  width: 24px;
  height: 24px;
}

#grid-view, #singular-view {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

#grid-view.active, #singular-view.active {
  opacity: 1;
  visibility: visible;
}

/* Close button for overlay */
.close-overlay {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 30px;
  height: 30px;
  cursor: pointer;
  z-index: 10002;
  display: none;
}

.close-overlay::before,
.close-overlay::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 2px;
  background-color: black;
}

.close-overlay::before {
  transform: rotate(45deg);
}

.close-overlay::after {
  transform: rotate(-45deg);
}

.overlay-menu.active .close-overlay {
  display: block;
  animation: fadeIn 0.3s ease forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Overlay Menu */
.overlay-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: white;
  z-index: 10001;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.overlay-menu.active {
  display: flex;
  opacity: 1;
}

.menu-item {
  margin: 15px 0;
  font-size: 28px;
  font-weight: 100;
  position: relative;
  overflow: hidden;
  transition: transform 0.3s ease;
}

.menu-item:hover {
  transform: translateY(-3px);
}

.menu-item a {
  position: relative;
  display: inline-block;
}

.menu-item a::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 1px;
  background-color: black;
  transition: width 0.3s ease;
}

.menu-item a:hover::after {
  width: 100%;
}

/* Gallery Layouts */
.gallery {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1em;
  padding: 2em;
  transition: all 0.3s ease;
  will-change: opacity, transform;
}

.gallery.singular-view {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2em;
}

.gallery img {
  width: 100%;
  height: auto;
  object-fit: cover;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  opacity: 0;
  aspect-ratio: 4 / 5;
  transform: translateY(20px) scale(0.95);
  will-change: opacity, transform;
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.gallery.singular-view img {
  width: auto;
  max-width: 80%;
  max-height: 80vh;
  aspect-ratio: auto;
}

.gallery img.loaded {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.gallery img:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.gallery img:active {
  transform: translateY(0) scale(0.98);
  transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.gallery.singular-view img:hover {
  transform: translateY(-3px) scale(1.01);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
}

.gallery.singular-view img:active {
  transform: translateY(0) scale(0.99);
}

/* Enhanced loading animation */
.gallery img.loading {
  opacity: 0;
  transform: translateY(30px) scale(0.9);
}

.gallery img.loaded {
  animation: slideInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes slideInUp {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  50% {
    opacity: 0.7;
    transform: translateY(-5px) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Enhanced modal animations */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: rgba(0, 0, 0, 0);
  opacity: 0;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: opacity, background-color;
  backdrop-filter: blur(0px);
}

.modal.show {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  opacity: 1;
  background-color: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(10px);
}

.modal-content-wrapper {
  position: relative;
  width: 90%;
  max-width: 1200px;
  height: 85%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  transform: scale(0.8) translateY(50px);
  opacity: 0;
  transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform, opacity;
}

.modal.show .modal-content-wrapper {
  transform: scale(1) translateY(0);
  opacity: 1;
}

.modal-image-container {
  flex: 1;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  margin-bottom: 10px;
}

.modal-content {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: opacity, transform;
  border-radius: 8px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.thumbnail-container {
  width: 100%;
  height: 100px;
  margin-top: auto;
  overflow: hidden;
}

.thumbnail-strip {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding: 10px 0;
  scrollbar-width: none;
  -ms-overflow-style: none;
  height: 100%;
  align-items: center;
}

.thumbnail-strip::-webkit-scrollbar {
  display: none;
}

/* Enhanced thumbnail animations */
.thumbnail {
  width: 80px;
  height: 80px;
  object-fit: cover;
  cursor: pointer;
  opacity: 0.6;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  border: 2px solid transparent;
  flex-shrink: 0;
  border-radius: 6px;
  transform: scale(1);
}

.thumbnail:hover {
  opacity: 0.9;
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

.thumbnail:active {
  transform: translateY(0) scale(0.95);
  transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.thumbnail.active {
  opacity: 1;
  border: 2px solid white;
  transform: scale(1.1);
  box-shadow: 0 8px 25px rgba(255, 255, 255, 0.3);
}

/* Enhanced button animations */
.modal-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  cursor: pointer;
  opacity: 0.7;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  z-index: 1100;
  padding: 0;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(10px);
}

.modal-nav svg {
  width: 24px;
  height: 24px;
  stroke: white;
  stroke-width: 2;
  transition: transform 0.2s ease;
}

.modal-nav:hover {
  opacity: 1;
  transform: translateY(-50%) scale(1.1);
  background: rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.modal-nav:hover svg {
  transform: scale(1.1);
}

.modal-nav:active {
  transform: translateY(-50%) scale(0.95);
  transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.modal-nav:active svg {
  transform: scale(0.9);
}

.modal-close {
  position: absolute;
  top: 15px;
  right: 15px;
  width: 32px;
  height: 32px;
  cursor: pointer;
  z-index: 1100;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  padding: 0;
  color: white;
  font-size: 18px;
  font-weight: 100;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0.7;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  backdrop-filter: blur(10px);
}

.modal-close:hover {
  opacity: 1;
  transform: scale(1.1);
  background: rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.modal-close:active {
  transform: scale(0.9);
  transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Swipe indicator for mobile */
.swipe-indicator {
  position: absolute;
  bottom: 120px;
  left: 50%;
  transform: translateX(-50%);
  color: rgba(255, 255, 255, 0.6);
  font-size: 12px;
  font-weight: 100;
  letter-spacing: 1px;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.modal.show .swipe-indicator {
  opacity: 1;
}

/* Footer */
footer {
  text-align: center;
  padding: 20px;
  font-size: 14px;
  color: #666;
  margin-top: 20px;
  transition: opacity 0.3s ease;
}

footer a {
  color: #333;
  transition: color 0.3s ease;
}

footer a:hover {
  color: #000;
}

/* Loading indicator for images */
.loading-indicator {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  border: 2px solid rgba(0, 0, 0, 0.1);
  border-top-color: #000;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  z-index: 9999;
  display: none;
}

@keyframes spin {
  to { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 1200px) {
  .gallery {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 768px) {
  .gallery {
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5em;
    padding: 1em;
  }

  .header {
    padding: 1em;
  }

  .site-logo {
    font-size: 18px;
  }

  .loading-text {
    font-size: 1.5rem;
  }

  .modal-close {
    top: 10px;
    right: 10px;
  }

  .modal-content-wrapper {
    width: 95%;
    height: 85%;
  }

  .menu-item {
    font-size: 24px;
  }

  .thumbnail {
    width: 60px;
    height: 60px;
  }

  .thumbnail-container {
    height: 80px;
  }

  .modal-nav {
    display: none;
  }

  .swipe-indicator {
    opacity: 1;
  }
}

@media (max-width: 480px) {
  .gallery {
    grid-template-columns: repeat(4, 1fr);
    gap: 0.3em;
  }

  .header {
    padding: 0.5em 1em;
    height: 50px;
  }

  .loading-text {
    font-size: 1.2rem;
  }

  .nav-icons {
    gap: 1em;
  }

  .thumbnail {
    width: 50px;
    height: 50px;
  }

  .thumbnail-container {
    height: 70px;
  }
}

a {
  text-decoration: none;
  color: inherit;
}

@media (hover: none) {
  .gallery img:hover {
    transform: none;
  }
}
</style>
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen">
    <h2 class="loading-text">Personal</h2>
  </div>

  <!-- Loading indicator for async operations -->
  <div class="loading-indicator" id="loading-indicator"></div>

  <!-- Header Navigation -->
  <header class="header">
    <div class="site-logo">
      <a href="home.html">Ashley Uy</a>
    </div>
    <div class="nav-icons">
      <div id="view-toggle">
        <!-- Grid view icon (shown when in singular view) -->
        <div class="nav-icon" id="grid-view">
          <div class="grid-icon">
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
            <div class="grid-dot"></div>
          </div>
        </div>
        <!-- Singular view icon (shown when in grid view) -->
        <div class="nav-icon" id="singular-view" class="active">
          <div class="singular-icon">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
          </div>
        </div>
      </div>
      <div class="nav-icon" id="menu-toggle">
        <div class="overlay-icon"></div>
      </div>
    </div>
  </header>

  <!-- Overlay Menu -->
  <div class="overlay-menu" id="overlay-menu">
    <div class="close-overlay" id="close-overlay"></div>
    <div class="menu-item"><a href="home.html">Home</a></div>
    <div class="menu-item"><a href="commercial.html">Commercial</a></div>
    <div class="menu-item"><a href="personal.html">Personal</a></div>
    <div class="menu-item"><a href="about.html">About</a></div>
  </div>

  <div class="gallery" id="gallery">
    <!-- Images will be added dynamically via JavaScript -->
  </div>

  <!-- Improved Modal Structure -->
  <div class="modal" id="image-modal">
    <button class="modal-close" id="modal-close" aria-label="Close modal">x</button>
    <div class="modal-content-wrapper">
      <div class="modal-image-container">
        <img class="modal-content" id="modal-image" alt="Featured image">
      </div>
      <div class="thumbnail-container">
        <div class="thumbnail-strip" id="thumbnail-strip">
          <!-- Thumbnails will be added dynamically -->
        </div>
      </div>
    </div>
    <button class="modal-nav modal-prev" aria-label="Previous image">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M19 12H5"></path>
    <path d="M12 19l-7-7 7-7"></path>
  </svg>
</button>
<button class="modal-nav modal-next" aria-label="Next image">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M5 12h14"></path>
    <path d="M12 5l7 7-7 7"></path>
  </svg>
</button>
    <div class="swipe-indicator">SWIPE LEFT OR RIGHT</div>
  </div>

  <!-- Footer -->
  <footer>
    Website Designed by <a href="https://robingabrieldesign.com" target="_blank">Robin Gabriel ©</a>
  </footer>

  <script>
    // Image data - split into initial and additional batches for better performance
    const initialImages = [
  'images/PERSONAL PROJECT/Untitled (3) Large.jpeg',
  'images/PERSONAL PROJECT/DSCF0466 copy Large.jpeg',
  'images/PERSONAL PROJECT/DSCF0476 copy Large.jpeg',
  'images/PERSONAL PROJECT/Image 2 (3) Large.jpeg',
  'images/PERSONAL PROJECT/Image 2 (4) Large.jpeg',
  'images/PERSONAL PROJECT/Image 3 (4) Large.jpeg',
  'images/PERSONAL PROJECT/Image 3 (5) Large.jpeg',
  'images/PERSONAL PROJECT/Image 4 (2) Large.jpeg',
  'images/PERSONAL PROJECT/Image 4 Large.jpeg',
  'images/PERSONAL PROJECT/Image 5 Large.jpeg',
  'images/PERSONAL PROJECT/Image 6 (3) Large.jpeg',
  'images/PERSONAL PROJECT/Image 7 (2) Large.jpeg',
  'images/PERSONAL PROJECT/IMG_0309 Large.jpeg',
  'images/PERSONAL PROJECT/IMG_0788 Large.jpeg',
  'images/PERSONAL PROJECT/IMG_0847 Large.jpeg',
  'images/PERSONAL PROJECT/IMG_3521 Large.jpeg',
  'images/PERSONAL PROJECT/IMG_7417 Large.jpeg',
  'images/PERSONAL PROJECT/IMG_7553 Large.jpeg'
];
    
    const additionalImages = [
  'images/PERSONAL PROJECT/P1020804 Large.jpeg',
  'images/PERSONAL PROJECT/IMG_7579 Large.jpeg',
  'images/PERSONAL PROJECT/IMG_1042 Large.jpeg',
  'images/PERSONAL PROJECT/DSCF0425 Large Large.jpeg',
  'images/PERSONAL PROJECT/Image 1 Large Large.jpeg',
  'images/PERSONAL PROJECT/Image 3 Large Large.jpeg',
  'images/PERSONAL PROJECT/Image 4 Large 3.13.20 PM Large.jpeg',
  'images/PERSONAL PROJECT/Image 5 (2) Large Large.jpeg',
  'images/PERSONAL PROJECT/Image 7 (3) Large Large.jpeg',
  'images/PERSONAL PROJECT/Image 7 (4) Large Large.jpeg',
  'images/PERSONAL PROJECT/PERSONAL!!!! Large Large.jpeg'
];

    // Combine all images for modal navigation
    let allImages = [...initialImages];
    let loadedAllImages = false;
    let isLoading = false;

    // DOM elements
    const gallery = document.getElementById("gallery");
    const modal = document.getElementById("image-modal");
    const modalImage = document.getElementById("modal-image");
    const thumbnailStrip = document.getElementById("thumbnail-strip");
    const closeModal = document.getElementById("modal-close");
    const loadingScreen = document.getElementById("loading-screen");
    const loadingIndicator = document.getElementById("loading-indicator");
    const overlayMenu = document.getElementById("overlay-menu");
    const menuToggle = document.getElementById("menu-toggle");
    const closeOverlay = document.getElementById("close-overlay");
    const gridViewBtn = document.getElementById("grid-view");
    const singularViewBtn = document.getElementById("singular-view");
    const viewToggle = document.getElementById("view-toggle");
    const prevButton = document.querySelector(".modal-prev");
    const nextButton = document.querySelector(".modal-next");
    const modalContentWrapper = document.querySelector(".modal-content-wrapper");

    // Initialize view mode
    let isGridView = true;
    let modalOpen = false;
    updateViewIcons();

    // Function to show loading indicator
    function showLoading() {
      isLoading = true;
      loadingIndicator.style.display = "block";
    }

    // Function to hide loading indicator
    function hideLoading() {
      isLoading = false;
      loadingIndicator.style.display = "none";
    }

    // Function to update view icons based on current view
    function updateViewIcons() {
      if (isGridView) {
        // In grid view, show singular icon
        singularViewBtn.classList.add("active");
        gridViewBtn.classList.remove("active");
      } else {
        // In singular view, show grid icon
        gridViewBtn.classList.add("active");
        singularViewBtn.classList.remove("active");
      }
    }

    // Toggle menu with animation
    menuToggle.addEventListener("click", () => {
      overlayMenu.classList.add("active");
    });

    // Close overlay with X button
    closeOverlay.addEventListener("click", () => {
      overlayMenu.classList.remove("active");
    });

    // Toggle view modes with debounce
    let viewToggleTimeout;
    viewToggle.addEventListener("click", () => {
  if (viewToggleTimeout) return;
  
  viewToggleTimeout = setTimeout(() => {
    viewToggleTimeout = null;
  }, 500);
  
  isGridView = !isGridView;
  gallery.classList.toggle("singular-view");
  updateViewIcons();
  
  // Apply enhanced staggered animation to images when switching views
  const allImages = gallery.querySelectorAll("img");
  allImages.forEach((img, index) => {
    requestAnimationFrame(() => {
      img.style.transitionDelay = `${index * 0.03}s`;
      img.style.transform = "translateY(10px) scale(0.95)";
      img.style.opacity = "0.7";
      
      setTimeout(() => {
        img.style.transform = "";
        img.style.opacity = "";
        
        // Reset the transition delay after animation completes
        setTimeout(() => {
          img.style.transitionDelay = "";
        }, 400);
      }, 100);
    });
  });
});

    // Load more images when scrolling near the bottom
    function loadMoreImagesIfNeeded() {
      if (loadedAllImages || isLoading) return;
      
      const scrollPosition = window.scrollY + window.innerHeight;
      const documentHeight = document.documentElement.scrollHeight;
      
      // If we're near the bottom (within 500px), load more images
      if (scrollPosition > documentHeight - 500) {
        loadMoreImages();
      }
    }

    // Load additional images
    function loadMoreImages() {
      if (loadedAllImages || isLoading) return;
      
      showLoading();
      
      // Get a batch of additional images (10 at a time)
      const imagesToLoad = additionalImages.splice(0, 10);
      
      if (imagesToLoad.length === 0) {
        loadedAllImages = true;
        hideLoading();
        return;
      }
      
      // Add these images to our main images array
      allImages.push(...imagesToLoad);
      
      // Create and append image elements
      const fragment = document.createDocumentFragment();
      
      imagesToLoad.forEach((src, index) => {
        const img = document.createElement("img");
        img.loading = "lazy"; // Native lazy loading
        img.src = src;
        img.alt = `Personal image ${allImages.length - imagesToLoad.length + index + 1}`;
        img.dataset.index = allImages.length - imagesToLoad.length + index;
        
        img.addEventListener("load", () => {
          requestAnimationFrame(() => {
            img.classList.add("loaded");
          });
        });
        
        img.addEventListener("error", () => {
          console.error(`Failed to load image: ${src}`);
          img.style.display = "none";
        });
        
        img.addEventListener("click", openModal);
        fragment.appendChild(img);
      });
      
      gallery.appendChild(fragment);
      
      // Hide loading after a short delay
      setTimeout(hideLoading, 300);
    }

    // Populate gallery with initial images
    function populateGallery() {
  const fragment = document.createDocumentFragment();
  let loadedCount = 0;
  
  initialImages.forEach((src, index) => {
    const img = document.createElement("img");
    img.loading = "lazy";
    img.src = src;
    img.alt = `Personal image ${index + 1}`;
    img.dataset.index = index;
    img.classList.add('loading');
    
    img.addEventListener("load", () => {
      loadedCount++;
      
      // Enhanced staggered animation with better timing
      setTimeout(() => {
        requestAnimationFrame(() => {
          img.classList.remove('loading');
          img.classList.add("loaded");
        });
      }, index * 50 + Math.random() * 100);
      
      // Hide loading screen when enough images are loaded
      if (loadedCount >= Math.min(6, initialImages.length)) {
        setTimeout(() => {
          loadingScreen.style.opacity = "0";
          setTimeout(() => {
            loadingScreen.style.display = "none";
          }, 500);
        }, 300);
      }
    });
    
    img.addEventListener("error", () => {
      console.error(`Failed to load image: ${src}`);
      loadedCount++;
      img.style.display = "none";
    });
    
    img.addEventListener("click", openModal);
    fragment.appendChild(img);
  });
  
  gallery.appendChild(fragment);
}

    // Create thumbnails for modal
    function createThumbnails() {
      thumbnailStrip.innerHTML = "";
      const fragment = document.createDocumentFragment();
      
      allImages.forEach((src, i) => {
        const thumbnail = document.createElement("img");
        thumbnail.loading = "lazy";
        thumbnail.src = src;
        thumbnail.alt = `Thumbnail ${i + 1}`;
        thumbnail.classList.add("thumbnail");
        thumbnail.dataset.index = i;
        
        thumbnail.addEventListener("click", () => {
          updateModalImage(i);
        });
        
        fragment.appendChild(thumbnail);
      });
      
      thumbnailStrip.appendChild(fragment);
    }

    // Open modal with clicked image
    function openModal(e) {
  if (modalOpen) return;
  modalOpen = true;
  
  const clickedImage = e.target;
  const index = parseInt(clickedImage.dataset.index);
  
  // Add click feedback
  clickedImage.style.transform = "scale(0.95)";
  setTimeout(() => {
    clickedImage.style.transform = "";
  }, 150);
  
  // Create thumbnails if they don't exist
  if (thumbnailStrip.children.length === 0) {
    createThumbnails();
  }
  
  // Set initial modal image
  modalImage.src = allImages[index];
  modalImage.dataset.index = index;
  modalImage.style.opacity = "0";
  modalImage.style.transform = "scale(0.9)";
  
  // Show modal with enhanced animation
  modal.classList.add("show");
  document.body.style.overflow = "hidden";
  
  // Update active thumbnail
  updateActiveThumbnail(index);
  
  // Fade in modal image with better timing
  setTimeout(() => {
    modalImage.style.opacity = "1";
    modalImage.style.transform = "scale(1)";
  }, 200);
  
  // Scroll active thumbnail into view
  const activeThumb = thumbnailStrip.querySelector(".thumbnail.active");
  if (activeThumb) {
    activeThumb.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
  }
}

    // Update modal image
    function updateModalImage(index, direction = null) {
      // Add slide animation based on direction if provided
      if (direction) {
        const slideOut = direction === 'next' ? 'translateX(-30px)' : 'translateX(30px)';
        const slideIn = direction === 'next' ? 'translateX(30px)' : 'translateX(-30px)';
        
        modalImage.style.opacity = "0";
        modalImage.style.transform = slideOut;
        
        setTimeout(() => {
          modalImage.src = allImages[index];
          modalImage.dataset.index = index;
          modalImage.style.transform = slideIn;
          
          // Ensure image is loaded before animating in
          modalImage.onload = () => {
            requestAnimationFrame(() => {
              modalImage.style.opacity = "1";
              modalImage.style.transform = "translateX(0)";
            });
          };
          
          // Fallback if onload doesn't fire
          setTimeout(() => {
            modalImage.style.opacity = "1";
            modalImage.style.transform = "translateX(0)";
          }, 50);
          
          updateActiveThumbnail(index);
          
          // Scroll the active thumbnail into view
          const activeThumb = thumbnailStrip.querySelector(".thumbnail.active");
          if (activeThumb) {
            activeThumb.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
          }
        }, 200);
      } else {
        // Simple fade transition for thumbnail clicks
        modalImage.style.opacity = "0";
        
        setTimeout(() => {
          modalImage.src = allImages[index];
          modalImage.dataset.index = index;
          
          modalImage.onload = () => {
            requestAnimationFrame(() => {
              modalImage.style.opacity = "1";
            });
          };
          
          // Fallback
          setTimeout(() => {
            modalImage.style.opacity = "1";
          }, 50);
          
          updateActiveThumbnail(index);
        }, 200);
      }
    }

    // Update active thumbnail
    function updateActiveThumbnail(index) {
      const thumbnails = thumbnailStrip.querySelectorAll(".thumbnail");
      thumbnails.forEach((thumb) => {
        if (parseInt(thumb.dataset.index) === index) {
          thumb.classList.add("active");
        } else {
          thumb.classList.remove("active");
        }
      });
    }

    // Close modal
    function closeModalFunction() {
      if (!modalOpen) return;
      
      modal.style.opacity = "0";
      
      setTimeout(() => {
        modal.classList.remove("show");
        modal.style.opacity = "1";
        document.body.style.overflow = "";
        modalOpen = false;
      }, 300);
    }

    // Show next image in modal
    function showNextImage() {
      const currentIndex = parseInt(modalImage.dataset.index);
      const nextIndex = (currentIndex + 1) % allImages.length;
      updateModalImage(nextIndex, 'next');
    }

    // Show previous image in modal
    function showPreviousImage() {
      const currentIndex = parseInt(modalImage.dataset.index);
      const previousIndex = (currentIndex - 1 + allImages.length) % allImages.length;
      updateModalImage(previousIndex, 'prev');
    }

    // Event listeners
    closeModal.addEventListener("click", closeModalFunction);
    prevButton.addEventListener("click", showPreviousImage);
    nextButton.addEventListener("click", showNextImage);

    // Close modal when clicking outside the image
    modal.addEventListener("click", function(e) {
      // Check if the click is directly on the modal background (not on any child elements)
      if (e.target === modal) {
        closeModalFunction();
      }
    });

    // Keyboard navigation
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        if (modal.classList.contains("show")) {
          closeModalFunction();
        } else if (overlayMenu.classList.contains("active")) {
          overlayMenu.classList.remove("active");
        }
      } else if (e.key === "ArrowRight" && modal.classList.contains("show")) {
        showNextImage();
      } else if (e.key === "ArrowLeft" && modal.classList.contains("show")) {
        showPreviousImage();
      }
    });

    // Enhanced touch support for mobile devices
    let touchStartX = 0;
    let touchEndX = 0;
    let touchStartY = 0;
    let touchEndY = 0;
    let isSwiping = false;

    function handleSwipe() {
      // Calculate horizontal and vertical distance
      const horizontalDistance = Math.abs(touchStartX - touchEndX);
      const verticalDistance = Math.abs(touchStartY - touchEndY);
      
      // Only process as a swipe if the horizontal movement is greater than vertical
      // and greater than a minimum threshold (to avoid processing taps as swipes)
      if (horizontalDistance > verticalDistance && horizontalDistance > 30) {
        if (touchStartX - touchEndX > 0) {
          // Swipe left, show next image
          showNextImage();
        } else {
          // Swipe right, show previous image
          showPreviousImage();
        }
        return true;
      }
      return false;
    }

    modal.addEventListener("touchstart", (e) => {
      touchStartX = e.changedTouches[0].screenX;
      touchStartY = e.changedTouches[0].screenY;
      isSwiping = true;
    });

    modal.addEventListener("touchmove", (e) => {
      if (isSwiping) {
        // Prevent default to avoid scrolling while swiping in the modal
        e.preventDefault();
      }
    }, { passive: false });

    modal.addEventListener("touchend", (e) => {
      if (!isSwiping) return;
      
      touchEndX = e.changedTouches[0].screenX;
      touchEndY = e.changedTouches[0].screenY;
      
      // If it's a swipe, handle it
      const wasSwipe = handleSwipe();
      
      // If it wasn't a swipe and the user tapped directly on the modal background, close it
      if (!wasSwipe && e.target === modal) {
        closeModalFunction();
      }
      
      isSwiping = false;
    });

    // Close overlay menu when clicking on a menu item
    document.querySelectorAll(".menu-item a").forEach(item => {
      item.addEventListener("click", () => {
        overlayMenu.style.opacity = "0";
        setTimeout(() => {
          overlayMenu.classList.remove("active");
          overlayMenu.style.opacity = "1";
        }, 300);
      });
    });

    // Throttle function to limit how often a function can be called
    function throttle(func, limit) {
      let inThrottle;
      return function() {
        const args = arguments;
        const context = this;
        if (!inThrottle) {
          func.apply(context, args);
          inThrottle = true;
          setTimeout(() => inThrottle = false, limit);
        }
      };
    }

    // Initialize
    window.addEventListener("load", () => {
      populateGallery();
      
      // Add scroll event listener for infinite loading
      window.addEventListener("scroll", throttle(loadMoreImagesIfNeeded, 200));
    });
  </script>
</body>
</html>
